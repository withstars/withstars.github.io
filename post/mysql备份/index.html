<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>MySQL 备份 - withstars - Everything that has a begin has an end.</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="withstars" />
  <meta name="description" content="备份应该备份什么 备份数据 &#43; 配置文件 &#43; 日志（二进制日志，事务日志） 应该进行热备份还是温备份，或者冷备份 一般是进行热备份。但是热备份属于在线备份" />

  <meta name="keywords" content="withstars, blog, java" />






<meta name="generator" content="Hugo 0.53" />


<link rel="canonical" href="http://withstars.cn/post/mysql%E5%A4%87%E4%BB%BD/" />



<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.ec807d8b802a40889537c26e014f733206312ea440d42e1f0dabed80918de1ac.css" integrity="sha256-7IB9i4AqQIiVN8JuAU9zMgYxLqRA1C4fDavtgJGN4aw=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="MySQL 备份" />
<meta property="og:description" content="备份应该备份什么 备份数据 &#43; 配置文件 &#43; 日志（二进制日志，事务日志） 应该进行热备份还是温备份，或者冷备份 一般是进行热备份。但是热备份属于在线备份" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://withstars.cn/post/mysql%E5%A4%87%E4%BB%BD/" /><meta property="article:published_time" content="2018-02-28T08:36:54-07:00"/>
<meta property="article:modified_time" content="2018-02-28T08:36:54-07:00"/>

<meta itemprop="name" content="MySQL 备份">
<meta itemprop="description" content="备份应该备份什么 备份数据 &#43; 配置文件 &#43; 日志（二进制日志，事务日志） 应该进行热备份还是温备份，或者冷备份 一般是进行热备份。但是热备份属于在线备份">


<meta itemprop="datePublished" content="2018-02-28T08:36:54-07:00" />
<meta itemprop="dateModified" content="2018-02-28T08:36:54-07:00" />
<meta itemprop="wordCount" content="3432">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MySQL 备份"/>
<meta name="twitter:description" content="备份应该备份什么 备份数据 &#43; 配置文件 &#43; 日志（二进制日志，事务日志） 应该进行热备份还是温备份，或者冷备份 一般是进行热备份。但是热备份属于在线备份"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">withstars</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://withstars.cn/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://withstars.cn/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://withstars.cn/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://withstars.cn/about">关于</a>
          
        
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      withstars
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://withstars.cn/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://withstars.cn/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://withstars.cn/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://withstars.cn/about">关于</a>
          

        

      </li>
    
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">MySQL 备份</h1>
      
      <div class="post-meta">
        <time datetime="2018-02-28" class="post-time">
          2018-02-28
        </time>
        
        

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#备份应该备份什么">备份应该备份什么</a></li>
<li><a href="#应该进行热备份还是温备份-或者冷备份">应该进行热备份还是温备份，或者冷备份</a></li>
<li><a href="#应该进行物理备份还是逻辑备份">应该进行物理备份还是逻辑备份</a></li>
<li><a href="#备份策略">备份策略</a></li>
<li><a href="#多长时间进行一次备份">多长时间进行一次备份</a></li>
<li><a href="#设计合适的备份策略">设计合适的备份策略</a>
<ul>
<li><a href="#使用cp进行备份">使用cp进行备份</a></li>
<li><a href="#使用mysqldump-复制binary-log备份">使用mysqldump+复制BINARY LOG备份</a></li>
<li><a href="#使用lvm2快照备份数据">使用lvm2快照备份数据</a></li>
<li><a href="#使用xtrabackup备份">使用Xtrabackup备份</a></li>
</ul></li>
<li><a href="#总结">总结</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<h4 id="备份应该备份什么">备份应该备份什么</h4>

<p>备份数据 + 配置文件 + 日志（二进制日志，事务日志）</p>

<h4 id="应该进行热备份还是温备份-或者冷备份">应该进行热备份还是温备份，或者冷备份</h4>

<p>一般是进行热备份。但是热备份属于在线备份，备份时候数据库还在读写状态，热备份是比较复杂的，要保证备份的数据是可用的，MyISAM存储引擎无法进行热备份只能用快照进行备份，否则进只能温备份，innodb可以热备份。</p>

<p>离线备份就靠谱，提供在线服务的数据库如果需要停下来进行备份，可以借助一些技术手段，比如为我们的数据库提供 从服务器，需要备份时候把从服务器停下来，然后在备份，再启动，启动之后从服务器会自动将主服务器那里将停止服务之前的数据进行同步过来。因此需要借助于mysql主从架构来实现。</p>

<h4 id="应该进行物理备份还是逻辑备份">应该进行物理备份还是逻辑备份</h4>

<p>物理备份直接复制数据文件，如果这个文件跟我们操作系统的文件系统无关的话，我们的数据文件跨平台性就很强，移植性也好但是有些存储引擎的数据文件可能会和操作系统的文件系统有关系，因此会导致移植能力不强，但是优势是备份速度很快</p>

<p>逻辑备份是依靠mysql进程将我们的数据从表中读取出来。并另存为文本文件的，因此这个逻辑备份过程需要mysql服务器进程参与的，备份速度慢，逻辑备份由于是直接导出到文件里面保存的所有可能会丢失数据的浮点数精度。优势，可以使用文本编辑器对数据进行处理，可移植能力也强，还可以跨mysql服务器版本</p>

<h4 id="备份策略">备份策略</h4>

<p>完全 +增量
完全 + 差异</p>

<h4 id="多长时间进行一次备份">多长时间进行一次备份</h4>

<p>如果数据变化量不是很大，每天变化也不是特别频繁，我们可以一周做一次完全，每天做一次增量或者差异到底多长时间进行一次备份取决于你数据库数据变化量，以及你所能忍受的还原时长，使用物理还是逻辑备份取决于你的需要</p>

<h4 id="设计合适的备份策略">设计合适的备份策略</h4>

<p>针对不同的场景下, 我们应该制定不同的备份策略对数据库进行备份, 一般情况下, 备份策略一般为以下几种
直接cp,tar复制数据库文件
mysqldump+复制BIN LOGS
lvm2快照+复制BIN LOGS
xtrabackup</p>

<p>以上的几种解决方案分别针对于不同的场景</p>

<p>如果数据量较小, 可以使用第一种方式, 直接复制数据库文件</p>

<p>如果数据量还行, 可以使用第二种方式, 先使用mysqldump对数据库进行完全备份, 然后定期备份BINARY LOG达到增量备份的效果</p>

<p>如果数据量一般, 而又不过分影响业务运行, 可以使用第三种方式, 使用lvm2的快照对数据文件进行备份, 而后定期备份BINARY LOG达到增量备份的效果</p>

<p>如果数据量很大, 而又不过分影响业务运行, 可以使用第四种方式, 使用xtrabackup进行完全备份后, 定期使用xtrabackup进行增量备份或差异备份</p>

<h5 id="使用cp进行备份">使用cp进行备份</h5>

<p>查看数据库的信息</p>

<pre><code>mysql&gt; SHOW DATABASES; 
mysql&gt; USE employees;
mysql&gt; SHOW TABLES;  
mysql&gt; SELECT COUNT(*) FROM employees; 
</code></pre>

<p>向数据库施加读锁</p>

<pre><code>mysql&gt; FLUSH TABLES WITH READ LOCK;    #向所有表施加读锁
</code></pre>

<p>备份数据文件</p>

<pre><code>[root@node1 ~]# mkdir /backup   #创建文件夹存放备份数据库文件
[root@node1 ~]# cp -a /var/lib/mysql/* /backup     #保留权限的拷贝源数据文件
[root@node1 ~]# ls /backup   #查看目录下的文件
</code></pre>

<p>模拟数据丢失并恢复</p>

<pre><code>[root@node1 ~]# rm -rf /var/lib/mysql/*    #删除数据库的所有文件
[root@node1 ~]# service mysqld restart   #重启MySQL, 如果是编译安装的应该不能启动, 如果rpm安装则会重新初始化数据库
mysql&gt; SHOW DATABASES;    #因为我们是rpm安装的, 连接到MySQL进行查看, 发现数据丢失了！

[root@node1 ~]# rm -rf /var/lib/mysql/*    #这一步可以不做
[root@node1 ~]# cp -a /backup/* /var/lib/mysql/    #将备份的数据文件拷贝回去
[root@node1 ~]# service mysqld restart  #重启MySQL

mysql&gt; SHOW DATABASES;    #数据库已恢复
</code></pre>

<h5 id="使用mysqldump-复制binary-log备份">使用mysqldump+复制BINARY LOG备份</h5>

<p>我们通过mysqldump进行一次完全备份, 再修改表中的数据, 然后再通过binary log进行恢复 二进制日志需要在mysql配置文件中添加 log_bin=on 开启</p>

<p>mysqldump命令介绍</p>

<pre><code>shell&gt; mysqldump [options] db_name [tbl_name ...]    恢复需要手动CRATE DATABASES
shell&gt; mysqldump [options] --databases db_name ...   恢复不需要手动创建数据库
shell&gt; mysqldump [options] --all-databases           恢复不需要手动创建数据库
</code></pre>

<p>其他选项:
     -E, &ndash;events: 备份事件调度器
     -R, &ndash;routines: 备份存储过程和存储函数
     &ndash;triggers: 备份表的触发器; &ndash;skip-triggers
     &ndash;master-date[=value]<br />
         1: 记录为CHANGE MASTER TO 语句、语句不被注释
         2: 记录为注释的CHANGE MASTER TO语句
         基于二进制还原只能全库还原</p>

<pre><code> --flush-logs: 日志滚动
     锁定表完成后执行日志滚动
</code></pre>

<p>查看数据库的信息</p>

<pre><code>mysql&gt; SHOW DATABASES;
mysql&gt; USE employees;
mysql&gt; SHOW TABLES; 
mysql&gt; SELECT COUNT(*) FROM employees; 
</code></pre>

<p>使用mysqldump备份数据库</p>

<pre><code>mysql -uroot -p -e 'SHOW MASTER STATUS'   #查看当前二进制文件的状态, 并记录下position的数字
[root@node1 ~]# mysqldump --all-databases --lock-all-tables  &gt; backup.sql   #备份数据库到backup.sql文件中
mysql&gt; CREATE DATABASE TEST1;   #创建一个数据库
mysql&gt; SHOW MASTER STATUS;   #记下现在的position

[root@node1 ~]# cp /var/lib/mysql/mysql-bin.000003 /root  #备份二进制文件
[root@node1 ~]# service mysqld stop   #停止MySQL
[root@node1 ~]# rm -rf /var/lib/mysql/*   #删除所有的数据文件
[root@node1 ~]# service mysqld start    #启动MySQL, 如果是编译安装的应该不能启动(需重新初始化), 如果rpm安装则会重新初始化数据库

mysql&gt; SHOW DATABASES;   #查看数据库, 数据丢失!
mysql&gt; SET sql_log_bin=OFF;   #暂时先将二进制日志关闭  

mysql&gt; source backup.sql  #恢复数据，所需时间根据数据库时间大小而定
mysql&gt; SET sql_log_bin=ON; 开启二进制日志
mysql&gt; SHOW DATABASES;   #数据库恢复, 但是缺少TEST1
[root@node1 ~]# mysqlbinlog --start-position=106 --stop-position=191 mysql-bin.000003 | mysql employees #通过二进制日志增量恢复数据
mysql&gt; SHOW DATABASES;    #现在TEST1出现了！
</code></pre>

<h5 id="使用lvm2快照备份数据">使用lvm2快照备份数据</h5>

<p>做实验之前我们先回顾一下lvm2-snapshot的知识
LVM快照简单来说就是将所快照源分区一个时间点所有文件的元数据进行保存，如果源文件没有改变，那么访问快照卷的相应文件则直接指向源分区的源文件，如果源文件发生改变，则快照卷中与之对应的文件不会发生改变。快照卷主要用于辅助备份文件。</p>

<p>部署lvm环境
添加硬盘; 这里我们直接实现SCSI硬盘的热插拔, 首先在虚拟机中添加一块硬盘, 不重启</p>

<p>查看数据库的信息</p>

<pre><code>mysql&gt; SHOW DATABASES; 
mysql&gt; USE employees;
mysql&gt; SHOW TABLES;
mysql&gt; SELECT COUNT(*) FROM employees; 
</code></pre>

<p>创建快照卷并备份</p>

<pre><code>mysql&gt; FLUSH TABLES WITH READ LOCK;     #锁定所有表
[root@node1 lvm_data]# lvcreate -L 1G -n mydata-snap -p r -s /dev/mapper/myvg-mydata   #创建快照卷
mysql&gt; UNLOCK TABLES;  #解锁所有表
[root@node1 lvm_data]# mkdir /lvm_snap  #创建文件夹
[root@node1 lvm_data]# mount /dev/myvg/mydata-snap /lvm_snap/  #挂载snap
[root@node1 lvm_data]# cd /lvm_snap/
[root@node1 lvm_snap]# ls
[root@node1 lvm_snap]# tar cf /tmp/mysqlback.tar *  #打包文件到/tmp/mysqlback.tar
[root@node1 ~]# umount /lvm_snap/  #卸载snap
[root@node1 ~]# lvremove myvg mydata-snap  #删除snap
</code></pre>

<p>恢复数据</p>

<pre><code>[root@node1 lvm_snap]# rm -rf /lvm_data/*
[root@node1 ~]# service mysqld start    #启动MySQL, 如果是编译安装的应该不能启动(需重新初始化), 如果rpm安装则会重新初始化数据库
mysql&gt; SHOW DATABASES;   #查看数据库, 数据丢失!
[root@node1 ~]# cd /lvm_data/
[root@node1 lvm_data]# rm -rf * #删除所有文件
[root@node1 lvm_data]# tar xf /tmp/mysqlback.tar     #解压备份数据库到此文件夹 
[root@node1 lvm_data]# ls  #查看当前的文件
mysql&gt; SHOW DATABASES;  #数据恢复了
</code></pre>

<h5 id="使用xtrabackup备份">使用Xtrabackup备份</h5>

<p>xtrabackup介绍
Xtrabackup是由percona提供的mysql数据库备份工具，据官方介绍，这也是世界上惟一一款开源的能够对innodb和xtradb数据库进行热备的工具。特点：
备份过程快速、可靠；
备份过程不会打断正在执行的事务；
能够基于压缩等功能节约磁盘空间和流量；
自动实现备份检验；
还原速度快；</p>

<p>xtrabackup实现完全备份
我们这里使用xtrabackup的前端配置工具innobackupex来实现对数据库的完全备份
使用innobackupex备份时, 会调用xtrabackup备份所有的InnoDB表, 复制所有关于表结构定义的相关文件(.frm)、以及MyISAM、MERGE、CSV和ARCHIVE表的相关文件, 同时还会备份触发器和数据库配置文件信息相关的文件, 这些文件会被保存至一个以时间命名的目录.</p>

<p>使用xtrabackup使用InnoDB能够发挥其最大功效, 并且InnoDB的每一张表必须使用单独的表空间,
我们需要在配置文件中添加 innodb_file_per_table = ON 来开启</p>

<p>下载安装xtrabackup</p>

<pre><code>[root@node1 ~]# wget https://www.percona.com/downloads/XtraBackup/Percona-XtraBackup-2.3.4/binary/redhat/6/x86_64/percona-xtrabackup-2.3.4-1.el6.x86_64.rpm   
[root@node1 ~]# yum localinstall percona-xtrabackup-2.3.4-1.el6.x86_64.rpm   #需要EPEL源
</code></pre>

<p>备份过程</p>

<pre><code>[root@node1 ~]# mkdir /extrabackup  #创建备份目录
[root@node1 ~]# innobackupex --user=root /extrabackup/ #备份数据
###################提示complete表示成功*********************
[root@node1 ~]# ls /extrabackup/  #看到备份目录
</code></pre>

<p>一般情况, 备份完成后, 数据不能用于恢复操作, 因为备份的数据中可能会包含尚未提交
的事务或已经提交但尚未同步至数据文件中的事务。因此, 此时的数据文件仍不一致, 所以我们需要”准备”一个完全备份</p>

<pre><code>[root@node1 ~]# innobackupex --apply-log /extrabackup/2016-04-27_07-30-48/  #指定备份文件的目录
</code></pre>

<p>恢复数据</p>

<pre><code>[root@node1 ~]# rm -rf /data/*   #删除数据文件
***不用启动数据库也可以还原*************
[root@node1 ~]# innobackupex --copy-back /extrabackup/2016-04-27_07-30-48/   #恢复数据, 记清使用方法
#########我们这里是编译安装的mariadb所以需要做一些操作##########
[root@node1 data]# killall mysqld
[root@node1 ~]# chown -R mysql:mysql ./* 
[root@node1 ~]# ll /data/      #数据恢复
[root@node1 data]# service mysqld restart
</code></pre>

<p>增量备份</p>

<pre><code>[root@node1 ~]# innobackupex --incremental /extrabackup/ --incremental-basedir=/extrabackup/2016-04-27_07-30-48/ 
[root@node1 ~]# ls /extrabackup/2016-04-27_07-57-22/ #查看备份文件
</code></pre>

<p>整理增量备份</p>

<pre><code>[root@node1 ~]# innobackupex --apply-log --redo-only /extrabackup/2016-04-27_07-30-48/
[root@node1 ~]# innobackupex --apply-log --redo-only /extrabackup/2016-04-27_07-30-48/ --incremental-dir=/extrabackup/2016-04-27_07-5
7-22/
</code></pre>

<p>恢复数据</p>

<pre><code>[root@node1 ~]# rm -rf /data/*   #删除数据
[root@node1 ~]# innobackupex --copy-back /extrabackup/2016-04-27_07-30-48/     #整理增量备份之后可以直接通过全量备份还原
[root@node1 ~]# chown -R mysql.mysql /data/
[root@node1 ~]# ls /data/ -l
</code></pre>

<h4 id="总结">总结</h4>

<table>
<thead>
<tr>
<th>备份方法</th>
<th align="right">备份速度</th>
<th align="center">恢复速度</th>
<th>便捷性</th>
<th align="right">功能</th>
<th align="center">一般用于</th>
</tr>
</thead>

<tbody>
<tr>
<td>cp</td>
<td align="right">快</td>
<td align="center">快</td>
<td>一般、灵活性低</td>
<td align="right">很弱</td>
<td align="center">少量数据备份</td>
</tr>

<tr>
<td></td>
<td align="right">mysqldump</td>
<td align="center">慢</td>
<td>慢</td>
<td align="right">一般、可无视存储引擎的差异</td>
<td align="center">一般</td>
</tr>

<tr>
<td></td>
<td align="right">lvm2快照</td>
<td align="center">快</td>
<td>快</td>
<td align="right">一般、支持几乎热备、速度快</td>
<td align="center">一般</td>
</tr>

<tr>
<td></td>
<td align="right">xtrabackup</td>
<td align="center">较快</td>
<td>较快</td>
<td align="right">实现innodb热备、对存储引擎有要求</td>
<td align="center">强大</td>
</tr>
</tbody>
</table>

    </div>

    
    


    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/mysql%E4%BC%98%E5%8C%96/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">MySQL 优化</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/mysql%E6%97%A5%E5%BF%97/">
            <span class="next-text nav-default">MySQL 日志</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  
  

  

  

  
  
    



        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:withstars@126.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/withstars" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>


<a href="http://withstars.cn/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2017 -
    2019
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        withstars.cn
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>






  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  













</body>
</html>
